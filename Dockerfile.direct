FROM python:3.9-slim

# Install system deps
RUN apt-get update && apt-get install -y \
    perl \
    ncbi-blast+ \
    wget \
    curl \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /app

# Copy everything
COPY . .

# Install directly from setup.py
RUN pip install --upgrade pip && \
    pip install -e .

# Test
RUN python -c "import acinetoscope; print('Import successful')"

RUN mkdir -p /data/input /data/output

ENTRYPOINT ["acinetoscope"]
CMD ["--help"]
